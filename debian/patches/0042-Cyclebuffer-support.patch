From: "Igor B. Poretsky" <poretsky@mlbox.ru>
Date: Thu, 10 Nov 2022 10:35:19 +0300
Subject: Cyclebuffer support

---
 lisp/Makefile                 |  1 +
 lisp/emacspeak-cyclebuffer.el | 51 +++++++++++++++++++++++++++++++++++++++++++
 lisp/emacspeak.el             |  1 +
 3 files changed, 53 insertions(+)
 create mode 100644 lisp/emacspeak-cyclebuffer.el

diff --git a/lisp/Makefile b/lisp/Makefile
index e95960e..8b5370c 100644
--- a/lisp/Makefile
+++ b/lisp/Makefile
@@ -123,6 +123,7 @@ emacspeak-compile.elc \
 emacspeak-company.elc \
 emacspeak-cperl.elc \
 emacspeak-custom.elc \
+emacspeak-cyclebuffer.elc \
 emacspeak-debian-bug.elc \
 emacspeak-dbus.elc \
 emacspeak-dictionary.elc \
diff --git a/lisp/emacspeak-cyclebuffer.el b/lisp/emacspeak-cyclebuffer.el
new file mode 100644
index 0000000..49e19a8
--- /dev/null
+++ b/lisp/emacspeak-cyclebuffer.el
@@ -0,0 +1,51 @@
+;; emacspeak-cyclebuffer.el --- Speech-enable cyclebuffer.el  -*- lexical-binding: t; -*-
+
+;; Copyright  (C)  2005  Sergei V. Fleytin <fleytin@mail.ru>
+
+;; Version: 1.0
+
+;; Author: Sergei V. Fleytin <fleytin@mail.ru>
+
+;; This program is free software; you can redistribute it and/or
+;; modify it under the terms of the GNU General Public License
+;; as published by the Free Software Foundation; either version 2
+;; of the License, or (at your option) any later version.
+
+;; This program is distributed in the hope that it will be useful,
+;; but WITHOUT ANY WARRANTY; without even the implied warranty of
+;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+;; GNU General Public License for more details.
+
+;; You should have received a copy of the GNU General Public License
+;; along with this program; if not, write to the Free Software
+;; Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+;; 02111-1307, USA.
+
+;; Commentary: 
+
+;;This program speech-enables `cyclebuffer.el' package which provides much faster and more convenient switching between buffers.
+
+;; Code:
+
+
+(require 'emacspeak-preamble)
+
+(defadvice cyclebuffer-forward (after emacspeak pre act comp)
+  "Provide auditory feedback."
+  (when (ems-interactive-p)
+    (emacspeak-auditory-icon 'select-object)
+    (emacspeak-speak-mode-line)))
+
+(defadvice cyclebuffer-backward (after emacspeak pre act comp)
+  "Provide auditory feedback."
+  (when (ems-interactive-p)
+    (emacspeak-auditory-icon 'select-object)
+    (emacspeak-speak-mode-line)))
+
+
+(provide 'emacspeak-cyclebuffer)
+
+;;; local variables:
+;;; byte-compile-dynamic: t
+;;; end: 
+
diff --git a/lisp/emacspeak.el b/lisp/emacspeak.el
index 18f6565..b7c5870 100644
--- a/lisp/emacspeak.el
+++ b/lisp/emacspeak.el
@@ -174,6 +174,7 @@ that implements the speech-enabling extensions for `package' (a string)."
 (emacspeak-do-package-setup "company" 'emacspeak-company)
 (emacspeak-do-package-setup "compile" 'emacspeak-compile)
 (emacspeak-do-package-setup "cperl-mode" 'emacspeak-cperl)
+(emacspeak-do-package-setup "cyclebuffer" 'emacspeak-cyclebuffer)
 (emacspeak-do-package-setup "pianobar" 'emacspeak-pianobar)
 (emacspeak-do-package-setup "proced" 'emacspeak-proced)
 (emacspeak-do-package-setup "popup" 'emacspeak-popup)
