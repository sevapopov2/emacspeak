From: "Igor B. Poretsky" <poretsky@mlbox.ru>
Date: Thu, 10 Nov 2022 17:59:32 +0300
Subject: Common navigation functions feedback

---
 lisp/emacspeak-eww.el      | 15 ---------------
 lisp/emacspeak-gnus.el     |  1 +
 lisp/emacspeak-webutils.el | 18 ++++++++++++++++++
 3 files changed, 19 insertions(+), 15 deletions(-)

diff --git a/lisp/emacspeak-eww.el b/lisp/emacspeak-eww.el
index 3408664..c9fc6b1 100644
--- a/lisp/emacspeak-eww.el
+++ b/lisp/emacspeak-eww.el
@@ -822,21 +822,6 @@ Retain previously set punctuations  mode."
      (when (ems-interactive-p)
        (emacspeak-auditory-icon 'button)))))
 
-(cl-loop
- for f in
- '(shr-next-link shr-previous-link)
- do
- (eval
-  `(defadvice ,f (around emacspeak pre act comp)
-     "Provide auditory feedback."
-     (ems-with-messages-silenced ad-do-it)
-     (when (ems-interactive-p)
-       (emacspeak-auditory-icon 'button)
-       (emacspeak-speak-region
-        (point)
-        (next-single-property-change (point) 'help-echo
-                                     nil (point-max)))))))
-
 ;;; Handle emacspeak-we-url-executor
 
 (defadvice eww-follow-link (around emacspeak pre act comp)
diff --git a/lisp/emacspeak-gnus.el b/lisp/emacspeak-gnus.el
index edc083e..00d1237 100644
--- a/lisp/emacspeak-gnus.el
+++ b/lisp/emacspeak-gnus.el
@@ -56,6 +56,7 @@
 (cl-declaim  (optimize  (safety 0) (speed 3)))
 (require 'emacspeak-preamble)
 (require 'emacspeak-hide)
+(require 'emacspeak-webutils)
 (require 'gnus)
 (require 'gnus-art)
 (require 'gnus-sum)
diff --git a/lisp/emacspeak-webutils.el b/lisp/emacspeak-webutils.el
index bac08d5..c8fab12 100644
--- a/lisp/emacspeak-webutils.el
+++ b/lisp/emacspeak-webutils.el
@@ -539,6 +539,24 @@ Useful in handling double-redirect from TuneIn."
      when p do (delete-process (car p)))))
 
 ;;}}}
+;;{{{ Common links navigation:
+
+(cl-loop
+ for f in
+ '(shr-next-link shr-previous-link)
+ do
+ (eval
+  `(defadvice ,f (around emacspeak pre act comp)
+     "Provide auditory feedback."
+     (ems-with-messages-silenced ad-do-it)
+     (when (ems-interactive-p)
+       (emacspeak-auditory-icon 'button)
+       (emacspeak-speak-region
+        (point)
+        (next-single-property-change (point) 'help-echo
+                                     nil (point-max)))))))
+
+;;}}}
 (provide 'emacspeak-webutils)
 ;;{{{ end of file
 
