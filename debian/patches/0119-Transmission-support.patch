From: "Igor B. Poretsky" <poretsky@mlbox.ru>
Date: Tue, 3 Jan 2023 11:35:00 +0300
Subject: Transmission support

---
 lisp/Makefile                  |   2 +
 lisp/emacspeak-transmission.el | 103 +++++++++++++++++++++++++++++++++++++++++
 lisp/emacspeak.el              |   1 +
 3 files changed, 106 insertions(+)
 create mode 100644 lisp/emacspeak-transmission.el

diff --git a/lisp/Makefile b/lisp/Makefile
index 1698596..3d1c08f 100644
--- a/lisp/Makefile
+++ b/lisp/Makefile
@@ -284,6 +284,7 @@ emacspeak-vlc.elc \
 emacspeak-vm.elc \
 emacspeak-w3m.elc \
 emacspeak-youtube-dl.elc \
+emacspeak-transmission.elc \
 emacspeak-wdired.elc \
 emacspeak-we.elc \
 emacspeak-webspace.elc \
@@ -587,6 +588,7 @@ emacspeak-vlc.elc: emacspeak-vlc.el dtk-speak.elc
 emacspeak-vm.elc: emacspeak-vm.el dtk-speak.elc voice-setup.elc
 emacspeak-w3m.elc: emacspeak-w3m.el emacspeak-webutils.elc emacspeak-we.elc
 emacspeak-youtube-dl.elc: emacspeak-youtube-dl.el dtk-speak.elc voice-setup.elc
+emacspeak-transmission.elc: emacspeak-transmission.el dtk-speak.elc
 emacspeak-wdired.elc: emacspeak-wdired.el dtk-speak.elc voice-setup.elc
 emacspeak-we.elc: emacspeak-we.el emacspeak-webutils.elc
 emacspeak-webutils.elc: emacspeak-webutils.el dtk-speak.elc voice-setup.elc
diff --git a/lisp/emacspeak-transmission.el b/lisp/emacspeak-transmission.el
new file mode 100644
index 0000000..c623cd1
--- /dev/null
+++ b/lisp/emacspeak-transmission.el
@@ -0,0 +1,103 @@
+;;; emacspeak-transmission.el --- speech-enable Transmission interface  -*- lexical-binding: t; -*-
+;;; Description:  Emacspeak extension to speech-enable Transmission torrent client
+;;; Keywords: Emacspeak, torrent, comm, download, magnet link
+;;{{{  LCD Archive entry:
+
+;;}}}
+;;{{{  Copyright:
+
+;;; Initial version: Author: Igor B. Poretsky <poretsky@mlbox.ru>
+;;;
+;;; This file is not part of GNU Emacs, but the same permissions apply.
+;;;
+;;; GNU Emacs is free software; you can redistribute it and/or modify
+;;; it under the terms of the GNU General Public License as published by
+;;; the Free Software Foundation; either version 2, or (at your option)
+;;; any later version.
+;;;
+;;; GNU Emacs is distributed in the hope that it will be useful,
+;;; but WITHOUT ANY WARRANTY; without even the implied warranty of
+;;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+;;; GNU General Public License for more details.
+;;;
+;;; You should have received a copy of the GNU General Public License
+;;; along with GNU Emacs; see the file COPYING.  If not, write to
+;;; the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.
+
+;;}}}
+;;{{{  Introduction:
+
+;;; Commentary:
+
+;;; This module speech-enables transmission-el package that
+;;; provides Emacs interface to a Transmission session.
+
+;;}}}
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+
+;;; Code:
+
+;;{{{ required modules
+
+(require 'emacspeak-preamble)
+
+;;}}}
+;;{{{ advice:
+
+(cl-loop
+ for f in
+ '(transmission
+   transmission-files
+   transmission-find-file
+   transmission-find-file-other-window
+   transmission-display-file
+   transmission-info
+   transmission-peers)
+ do
+ (eval
+  `(defadvice ,f (after emacspeak pre act comp)
+     "provide auditory feedback."
+     (when (ems-interactive-p)
+       (emacspeak-auditory-icon 'open-object)
+       (emacspeak-speak-mode-line)))))
+
+(cl-loop
+ for f in
+ '(transmission-files-want
+   transmission-copy-filename-as-kill
+   transmission-copy-magnet
+   transmission-toggle-mark)
+ do
+ (eval
+  `(defadvice ,f (after emacspeak pre act comp)
+     "produce auditory icon."
+     (when (ems-interactive-p)
+       (emacspeak-auditory-icon 'mark-object)))))
+
+(cl-loop
+ for f in
+ '(transmission-files-unwant
+   transmission-unmark-all)
+ do
+ (eval
+  `(defadvice ,f (after emacspeak pre act comp)
+     "produce auditory icon."
+     (when (ems-interactive-p)
+       (emacspeak-auditory-icon 'deselect-object)))))
+
+(defadvice transmission-quit (after emacspeak pre act comp)
+  "provide auditory confirmation."
+  (when (ems-interactive-p)
+    (emacspeak-auditory-icon 'close-object)
+    (emacspeak-speak-mode-line)))
+
+;;}}}
+(provide 'emacspeak-transmission)
+;;{{{ end of file 
+
+;;; local variables:
+;;; folded-file: t
+;;; byte-compile-dynamic: t
+;;; end: 
+
+;;}}}
diff --git a/lisp/emacspeak.el b/lisp/emacspeak.el
index 68f3ee6..e60e0e4 100644
--- a/lisp/emacspeak.el
+++ b/lisp/emacspeak.el
@@ -332,6 +332,7 @@ that implements the speech-enabling extensions for `package' (a string)."
 (emacspeak-do-package-setup "vm" 'emacspeak-vm)
 (emacspeak-do-package-setup "w3m" 'emacspeak-w3m)
 (emacspeak-do-package-setup "youtube-dl" 'emacspeak-youtube-dl)
+(emacspeak-do-package-setup "transmission" 'emacspeak-transmission)
 (emacspeak-do-package-setup "wget" 'emacspeak-wget)
 (emacspeak-do-package-setup "wdired" 'emacspeak-wdired)
 (emacspeak-do-package-setup "cus-edit" 'emacspeak-custom)
